<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Beranda Petani | NBB Coffee Hub</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    .font-title { font-family: 'Playfair Display', serif; }
    .font-body { font-family: 'Poppins', sans-serif; }
  </style>
</head>

<body class="bg-gray-50 font-body">

<!-- ================= NAVBAR ================= -->
<header class="bg-[#4B3832]/90 backdrop-blur-sm text-[#EFEBE9] fixed w-full top-0 z-50">
  <div class="max-w-7xl mx-auto flex justify-between items-center px-8 h-20 bg-[#4B3832]/70">

    <!-- LOGO -->
    <img src="logo.png" alt="NBB Coffee Hub Logo" class="h-12 w-auto drop-shadow-md">

    <!-- MENU -->
    <nav class="hidden md:flex space-x-8 font-medium">
      <a href="petani_beranda.html" class="text-[#B8860B] font-semibold transition">Beranda</a>
      <a href="petani_produk.html" class="hover:text-[#B8860B] transition">Kelola Produk</a>
      <a href="petani_blog.html" class="hover:text-[#B8860B] transition">Blog</a>
      <a href="petani_harga.html" class="hover:text-[#B8860B] transition">Harga Kopi</a>
    </nav>

    <!-- ICON PROFIL -->
    <button id="open-profil" class="hover:text-[#B8860B] transition">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none"
           viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M5.121 17.804A12 12 0 0112 15
             c2.146 0 4.148.74 5.766 2.804
             M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
      </svg>
    </button>

  </div>
</header>

<!-- ================= PANEL PROFIL ================= -->
<div id="profil-panel"
  class="fixed top-0 right-0 h-full w-80 bg-white shadow-xl z-[100]
         transform translate-x-full transition-all duration-300 ease-in-out">

  <div class="flex justify-between items-center px-6 py-4 border-b">
    <h3 class="text-lg font-semibold text-[#4B3832]">Profil Petani</h3>
    <button id="close-profil"
      class="text-gray-500 hover:text-red-600 text-xl">&times;</button>
  </div>

  <div id="profil-panel-data" class="p-6 space-y-4 text-sm">
    <p class="text-gray-500 italic">Memuat data...</p>
  </div>

  <div class="p-6 border-t text-center">
    <a href="petani_editprofil.html"
       class="bg-[#B8860B] text-white px-4 py-2 rounded-lg hover:bg-[#654321] transition">
       Edit Profil
    </a>
  </div>
</div>

<!-- ================= MAIN ================= -->
<main class="max-w-7xl mx-auto px-6 pt-28 pb-16">

  <h1 class="text-3xl font-title text-[#4B3832] mb-6">
    Beranda Petani
  </h1>

  <!-- STATISTIK -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-10">
    <div class="bg-white rounded-xl shadow-md p-6">
      <p class="text-gray-500 text-sm">Total Produk Diinput</p>
      <h2 id="totalInput" class="text-3xl font-semibold text-[#4B3832] mt-2">0</h2>
    </div>
    <div class="bg-white rounded-xl shadow-md p-6">
      <p class="text-gray-500 text-sm">Total Produk Terjual</p>
      <h2 id="totalTerjual" class="text-3xl font-semibold text-[#4B3832] mt-2">0</h2>
    </div>
    <div class="bg-white rounded-xl shadow-md p-6">
      <p class="text-gray-500 text-sm">Total Diskon Aktif</p>
      <h2 id="totalDiskon" class="text-3xl font-semibold text-[#4B3832] mt-2">0</h2>
    </div>
  </div>

  <!-- TIPS -->
  <div class="bg-gradient-to-r from-[#4B3832]/90 to-[#B8860B]/70
              text-white rounded-xl p-6 shadow-md">
    <h3 class="text-lg font-semibold mb-2 font-title">
      Tips Pemasaran
    </h3>
    <p class="text-sm leading-relaxed">
      Gunakan foto produk yang jelas dan tambahkan deskripsi menarik agar pembeli
      percaya kualitas kopi Anda. Berikan diskon kecil secara berkala untuk
      menarik pelanggan baru!
    </p>
  </div>

</main>

<!-- ================= FOOTER ================= -->
<footer class="bg-[#4B3832]/90 text-[#EFEBE9] py-10 mt-12">
  <div class="text-center text-sm text-gray-300">
    &copy; 2025 NBB Coffee Hub Petani. All Rights Reserved.
  </div>
</footer>

<!-- ================= SCRIPT ================= -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const panel = document.getElementById("profil-panel");
  const openBtn = document.getElementById("open-profil");
  const closeBtn = document.getElementById("close-profil");
  const panelData = document.getElementById("profil-panel-data");

  openBtn.addEventListener("click", () =>
    panel.classList.remove("translate-x-full"));
  closeBtn.addEventListener("click", () =>
    panel.classList.add("translate-x-full"));

  // DATA PROFIL
  const data = JSON.parse(localStorage.getItem("profilPetani"));

  if (!data) {
    panelData.innerHTML = `
      <p class="italic text-gray-500">Belum ada data profil.</p>
      <a href="petani_editprofil.html"
         class="text-[#B8860B] underline">Isi profil</a>
    `;
  } else {
    panelData.innerHTML = `
      <div class="flex justify-center mb-4">
        <img src="${data.foto || 'default-profile.png'}"
          class="w-20 h-20 rounded-full object-cover border-4 border-[#B8860B]/70">
      </div>
      <p><b>Nama:</b> ${data.nama}</p>
      <p><b>Email:</b> ${data.email}</p>
      <p><b>Telepon:</b> ${data.telepon}</p>
      <p><b>Alamat:</b> ${data.alamat}</p>
      <p><b>Wilayah:</b> ${data.kecamatan}, ${data.kota}</p>
      <p><b>Luas:</b> ${data.luas}</p>
      <p><b>Jenis:</b> ${data.jenis}</p>
    `;
  }

  // STATISTIK
  const produkPetani = JSON.parse(localStorage.getItem("produkPetani")) || [];
  const produkTerjual = JSON.parse(localStorage.getItem("produkTerjual")) || [];
  const diskonPetani = JSON.parse(localStorage.getItem("diskonPetani")) || [];

  document.getElementById("totalInput").textContent = produkPetani.length;
  document.getElementById("totalTerjual").textContent = produkTerjual.length;
  document.getElementById("totalDiskon").textContent = diskonPetani.length;
});
</script>

</body>
</html>
